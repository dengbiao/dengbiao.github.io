<!DOCTYPE html>
<html>

    <head>
        <meta charset=utf-8 />
        <title>
             邓彪的博客   
             | 百度地图API key申请申请详细步骤 
        </title>
        <link rel="shortcut icon" type="image/ico" href="/assets/images/portrait.jpg">
        <link rel="stylesheet" href="/assets/css/clear.css" />
        
        <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
        <link rel="stylesheet" href="/assets/css/default.css" />
        <link rel="stylesheet" href="/assets/css/pygments.css" />
        <script src="/assets/js/jquery-1.10.2.min.js"></script>

    </head>

    <body>
        <div id="container main">
            <header>
            <div class="info">
                <div class="logo">
                    <a href="/pages/about.html"><img class="portrait img-circle" src="/assets/images/portrait.jpg" /></a>
                </div>
                <h1><a href="/">邓彪的博客</a></h1>
                <div class="motto">有一种东西叫做梦想</div>
            </div>
            <form method="get" action="http://www.google.com.hk/search" id="search-form">
                <div class="input-group input-group-sm header_search">
                    <input type="text" id="search-query" name="q" id="s" autocomplete="on" class="form-control" placeholder="Search">
                    <span class="input-group-addon text" >
                        <input type="submit" name="btnG" value="搜索" id="search-btn">
                    </span>
                    <input type="hidden" name="ie" value="UTF-8">
                    <input type="hidden" name="oe" value="UTF-8">
                    <input type="hidden" name="hl" value="zh-CN">
                    <input type="hidden" name="domains" value="dengbiao.github.io">
                    <input type="hidden" name="sitesearch" value="dengbiao.github.io">
                </div>
            </form>

            <ul class="sidelist">
                <li><a href="http://localhost:4000/atom.xml" class="rss" title="订阅"></a></li>
                <li><a href="http://localhost:4000/pages/archive.html" class="archive" title="归档"></a></li>
            </ul>
            </header>

            <article>
            <div class="page_container">
    <div class="date">
        <span class="day">
            14
        </span>
        <span class="month">
            03
        </span>
    </div>
    <div class="page_item">
        
        <div class="title">
            <h1><a href="/develop/android/2014-03-14-baidu-map-api-key.html">百度地图API key申请申请详细步骤</a></h1>
        </div>
        
        
        <div class="page_img">
            <img src="/assets/uploads/baidumapapi.png" />
        </div>
        
        <div class="page_content">
            <p><p>开发移动app应用，经常会遇到定位与导航需求，开发者自己去实现不太可能，一个是工作量大，另一个是程序员世界最常用的话<code>不要重复制造轮子</code>。百度在地图界混迹如此之久，积累的东西还是可以的。</p>

<p>最近开发一个景点相关的项目，借用百度地图提供的API来实现项目中的定位与导航需求。根据百度地图官方网站的引导，申请了开发者API。但是在请求路径规划的时候，总是遇到认证失败，error:102的错误。 因此，将百度地图API申请的相关流程记录下来。希望能够给需要用百度地图开发的程序员们一些引导。</p>
<!--more-->
<h3 id="api">申请API</h3>

<p>百度地图Android平台API申请链接当前为<a href="http://lbsyun.baidu.com/apiconsole/key">http://lbsyun.baidu.com/apiconsole/key</a>（<code>注：随时可能变动，已百度地图API首页最新链接为准</code>)</p>

<p><img src="http://dengbiao.github.io/assets/uploads/QQ20140314-1.png" alt="API Key申请页面" title="APIkey申请页面" /></p>

<h4 id="">创建应用</h4>

<p>进入API链接申请页面后，点击创建应用：</p>

<p><img src="http://dengbiao.github.io/assets/uploads/QQ20140314-2.png" alt="创建应用" title="创建应用" /></p>

<p>应用名称随便填写，应用类型选<code>for mobile</code>, 禁用服务不用选择，关键问题就是安全码。如图所示，安全码为<code>Android签名证书的sha1值+“;”+packagename，即数字签名+分号+报名</code>组成。我在这一步根据官网提供的两种获得安全码的办法，生成了自己的安全码，可是最后key认证失败了。 其实我感觉官网写的不是很清楚，当然也是因为自己对keystore机制不是很了解。这里具体说明一下。</p>

<p>官网提供的两种方法都是针对系统默认的keystore来生成安全码的，那么当联机调试的时候，eclipse也是用默认的keystore来生成的应用，所以，key认证没有遇到问题，当用eclipse导出APK时，eclipse会询问使用现有的keystore还是重新生成一个keystore。我选择的是生成了一个新的keystore。结果这个keystore和前面获取sha1值使用的keysotre不是同一个，直接导致了百度地图key认证失败。</p>

<p>所以，当发现问题之后，我的尝试了在eclipse导入我自己的keystore，但是没有成功，最后选用的办法是申请两个APIkey，分别与eclipse默认的keystore和自己生成的keystore对应，开发的时候使用默认keystore，当需要导出的时候，将代码中的key替换成与自己生成的keystore对应的key。</p>

<h4 id="key">key的获取</h4>

<p>讲了很多废话，回头才发现没有讲具体怎么获取key。这里只讲一种简单的用eclipse获取sha1值与packageName值生成key的办法。至于那些使用keytool的程序员们，你们应该能够自己解决的，就不多说了。</p>

<h5 id="1keysotresha1">1.获取keysotre的sha1值</h5>

<p>我使用的版本mac下的eclipse，查看方法是依次进入如下路径： <code>ADT-&gt;Prefrence-&gt;Android-&gt;Build</code>,然后在设置面板的右边可以看到sha1值的具体信息，如下图。</p>

<p><img src="http://dengbiao.github.io/assets/uploads/QQ20140314-3.png" alt="eclipse查看keystore sha1" title="eclipse查看keystore sha1值" /></p>

<h5 id="2packagename">2.获取PackageName</h5>

<p>eclipse中，打开项目的AndroidMenifest.xml文件，头部的Manifest标签中的package对应的内容就是我们需要的，如下图</p>

<p><img src="http://dengbiao.github.io/assets/uploads/QQ20140314-4.png" alt="eclipse查看packageName" title="eclipse查看packageName" /></p>

<h5 id="2apikey">2.生成百度地图API开发者key</h5>

<p>将上面获得的sha1值与packageName一起按格式<code>sha1;packageName</code>的形式填入到本文前面<code>创建应用</code>一节中图片中的安全码位置。然后点击确定，系统会提示创建成功，然后系统会为你的应用生成一个专门的字符串，即key，如下图所示。将其配置到自己的应用中使用即可。</p>

<p><img src="http://dengbiao.github.io/assets/uploads/QQ20140314-5.png" alt="系统生成key" title="系统生成key" /></p>

<h3 id="_2">总结</h3>

<p>到此，本文结束了，生命在于折腾。。。</p></p> 
        </div>


        <div class="page_comments" id="page_comments">
            <!-- Duoshuo Comment BEGIN -->
            <div class="ds-thread" data-thread-key="/develop/android/baidu-map-api-key" data-title="百度地图API key申请申请详细步骤" ></div>
            <script type="text/javascript">
                var duoshuoQuery = {short_name:"dengbiao"};
(function() {
 var ds = document.createElement('script');
 ds.type = 'text/javascript';ds.async = true;
 ds.src = 'http://static.duoshuo.com/embed.js';
 ds.charset = 'UTF-8';
 (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
 })();
</script>
<!-- Duoshuo Comment END -->
    </div>
    </div>
</div>
<div class="clear"></div>


            </article>

            <footer>
            <p>
            Copyright @ 2013-2015 dengbiao | All Rights Reserved. Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and <a href="http://getbootstrap.com/" target="_blank" >Bootstrap</a>. 
            </p>
            </footer>

        </div>

        <! --- backToTop js  -->
        <script>
            (function() {
                var $backToTopTxt = "", $backToTopEle = $('<div class="backToTop"></div>').appendTo($("body"))
                .text($backToTopTxt).attr("title", $backToTopTxt).click(function() {
                    $("html, body").animate({ scrollTop: 0 }, 120);
                    }), $backToTopFun = function() {
                    var st = $(document).scrollTop(), winh = $(window).height();
                    (st > 0)? $backToTopEle.fadeIn('slow') : $backToTopEle.fadeOut('slow');
                    //IE6下的定位
                    if (!window.XMLHttpRequest) {
                        $backToTopEle.css("top", st + winh - 166);
                    }
                };
                $(window).bind("scroll", $backToTopFun);
                $(function() { $backToTopFun(); });
            })();
        </script>

        <! --- google analytics  -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-45239189-1', 'dengbiao.github.io');
            ga('send', 'pageview');

        </script>

    </body>

</html>
